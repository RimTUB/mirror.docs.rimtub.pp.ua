"use strict";(self.webpackChunkrim_tub_docs_release=self.webpackChunkrim_tub_docs_release||[]).push([[8487],{7455:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"module","title":"Module","description":"The module object is passed to the main function of the module.","source":"@site/versioned_docs/version-2.2.2-1/05_Module.md","sourceDirName":".","slug":"/module","permalink":"/docs/2.2.2-1/module","draft":false,"unlisted":false,"tags":[],"version":"2.2.2-1","sidebarPosition":5,"frontMatter":{"title":"Module","sidebar_position":5,"slug":"module","id":"module"},"sidebar":"tutorialSidebar","previous":{"title":"Module Structure","permalink":"/docs/2.2.2-1/module_structure"},"next":{"title":"Client","permalink":"/docs/2.2.2-1/client"}}');var d=s(4848),i=s(8453);const l={title:"Module",sidebar_position:5,slug:"module",id:"module"},c="Module",t={},o=[{value:"Parameters",id:"parameters",level:2},{value:"Methods",id:"methods",level:2},{value:"<code>get_group</code>",id:"get_group",level:3},{value:"<code>add_task</code>",id:"add_task",level:3},{value:"async <code>prepare_buttons</code>",id:"async-prepare_buttons",level:3},{value:"async <code>send_buttons</code>",id:"async-send_buttons",level:3},{value:"Decorators",id:"decorators",level:2},{value:"<code>on_ready</code>",id:"on_ready",level:3},{value:"<code>callback</code>",id:"callback",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"module",children:"Module"})}),"\n",(0,d.jsx)(n.p,{children:"The module object is passed to the main function of the module."}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-py",metastring:'title="Module/__init__.py" showLineNumbers',children:"from utils import *\r\n\r\n# highlight-next-line\r\nasync def main(app: Client, mod: Module):\r\n    pass\r\n\n"})}),"\n",(0,d.jsx)(n.p,{children:"This object is used for all main actions with the module: registering commands, sending buttons, obtaining groups, etc."}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"name"})," (",(0,d.jsx)(n.em,{children:"str"}),") - The name of the module"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"path"})," (",(0,d.jsx)(n.em,{children:"pathlib.Path"}),") - Path to the module folder for working with files"]}),"\n",(0,d.jsx)("a",{class:"anchor anchorWithStickyNavbar_LWe7",id:"db_path"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"db_path"})," (",(0,d.jsx)(n.em,{children:"pathlib.Path"}),") - Path to the module's SQL database. See ",(0,d.jsx)(n.a,{href:"storages/db",children:"SQL DataBase (db)"})]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"db"})," (",(0,d.jsx)(n.em,{children:"ModuleDB"}),") - SQL Database. See ",(0,d.jsx)(n.a,{href:"storages/db",children:"SQL DataBase (db)"})]}),"\n",(0,d.jsx)("a",{className:"anchor anchorWithStickyNavbar_LWe7",id:"st"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"st"})," (",(0,d.jsx)(n.em,{children:"DictStorage"}),") - Temporary storage based on a dictionary. See ",(0,d.jsx)(n.a,{href:"storages/st",children:"Temporary Storage (st)"})]}),"\n",(0,d.jsx)("a",{className:"anchor anchorWithStickyNavbar_LWe7",id:"logger"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"logger"}),"  (",(0,d.jsx)(n.em,{children:"logging.Logger"}),") - Module logger. All logs should be output through it."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"manifest"})," (",(0,d.jsx)(n.em,{children:"dict"}),") - Loaded data from manifest.yaml"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"group"})," (",(0,d.jsx)(n.em,{children:"int"}),") - The main group of the module. Used in handlers"]}),"\n",(0,d.jsx)("a",{className:"anchor anchorWithStickyNavbar_LWe7",id:"cmd"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"cmd"})," (",(0,d.jsx)(n.em,{children:"NCmd"}),") - Object for registering command handlers."]}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/docs/commands_handlers",children:"Command Handlers"})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-py",metastring:'title="Module/__init__.py" showLineNumbers',children:"from utils import *\r\n\r\nasync def main(app: Client, mod: Module):\r\n\r\n    # highlight-next-line\r\n    cmd = mod.cmd\r\n\r\n    # highlight-next-line\r\n    @cmd(['cmd', 'my_command'])\r\n    async def _cmd(_, msg: M):\r\n        pass\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.h3,{id:"get_group",children:(0,d.jsx)(n.code,{children:"get_group"})}),"\n",(0,d.jsxs)(n.p,{children:["Returns a ",(0,d.jsx)(n.strong,{children:"new"})," group of the module for handlers"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Arguments"}),": None"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Returns"}),": ",(0,d.jsx)(n.em,{children:"str"})," - A new group of the module"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.h3,{id:"add_task",children:(0,d.jsx)(n.code,{children:"add_task"})}),"\n",(0,d.jsx)(n.p,{children:"Adds a task to the execution queue (ev.create_task)"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-py",children:"async def worker(arg):\r\n    pass\r\n\r\nmod.add_task(worker(arg))\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"coro"})," (",(0,d.jsx)(n.em,{children:"Coroutine"}),") - Coroutine to be executed."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Returns"}),": ",(0,d.jsx)(n.em,{children:"asyncio.Task"})," - Task object"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.h3,{id:"async-prepare_buttons",children:["async ",(0,d.jsx)(n.code,{children:"prepare_buttons"})]}),"\n",(0,d.jsxs)(n.p,{children:["Prepares buttons. See ",(0,d.jsx)(n.a,{href:"/docs/buttons",children:"Buttons"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"buttons"})," (",(0,d.jsx)(n.em,{children:"Buttons"}),") - Buttons to be prepared"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Returns"}),": ",(0,d.jsx)(n.em,{children:"Buttons"})," - Prepared buttons"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.h3,{id:"async-send_buttons",children:["async ",(0,d.jsx)(n.code,{children:"send_buttons"})]}),"\n",(0,d.jsxs)(n.p,{children:["Sends buttons to a specific chat. See ",(0,d.jsx)(n.a,{href:"/docs/buttons",children:"Buttons"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"chat_id"})," (",(0,d.jsx)(n.em,{children:"str|int"}),") - Chat ID or username of the chat to send buttons to"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"text"})," (",(0,d.jsx)(n.em,{children:"str"}),") - Message text"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"buttons"})," (",(0,d.jsx)(n.em,{children:"Buttons"}),") - Buttons"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"**kwargs"})," - Parameters for ",(0,d.jsx)(n.code,{children:"Client.send_inline_bot_result"})]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Returns"}),": ",(0,d.jsx)(n.em,{children:"Message"})," - Sent message"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"decorators",children:"Decorators"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.h3,{id:"on_ready",children:(0,d.jsx)(n.code,{children:"on_ready"})}),"\n",(0,d.jsx)(n.p,{children:"A decorator that is called when the bot is launched"}),"\n",(0,d.jsxs)(n.p,{children:["See ",(0,d.jsx)(n.a,{href:"/docs/mod/on_ready",children:"@mod.on_ready"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-py",metastring:'title="Module/__init__.py" showLineNumbers',children:'from utils import *\r\n\r\nasync def main(app: Client, mod: Module):\r\n    \r\n    # highlight-next-line\r\n    @mod.on_ready\r\n    async def _onr(app: Client):\r\n        mod.logger.info("RimTUB has started!")\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.h3,{id:"callback",children:(0,d.jsx)(n.code,{children:"callback"})}),"\n",(0,d.jsxs)(n.p,{children:["Callback handler. See ",(0,d.jsx)(n.a,{href:"/docs/buttons",children:"Buttons"})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"callback_data"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"str"}),") - Exact match of callback data"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"startswith"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"str"}),") - Beginning of callback data."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"group"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"int"}),") - Handler group"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"is_private"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"bool"}),") = ",(0,d.jsx)(n.em,{children:"True"})," - Private button."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"allowed_ids"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"List[int]"}),") - If ",(0,d.jsx)(n.code,{children:"is_private==True"}),": user_ids of those who can press the button"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"message"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"str"}),") = ",(0,d.jsx)(n.em,{children:(0,d.jsx)(n.code,{children:"'This is not your button!'"})})," - If ",(0,d.jsx)(n.code,{children:"is_private==True"}),": Message displayed if access to the button is denied"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"show_alert"})," (",(0,d.jsx)(n.em,{children:"Optional"}),", ",(0,d.jsx)(n.em,{children:"bool"}),") = ",(0,d.jsx)(n.em,{children:"True"})," - If ",(0,d.jsx)(n.code,{children:"is_private==True"}),": Whether to display the error message as a popup or not (parameter ",(0,d.jsx)(n.code,{children:"show_alert"})," in ",(0,d.jsx)(n.code,{children:"Client.answer_callback_query"}),")\r\n\xa0"]}),"\n"]}),"\n",(0,d.jsx)(n.admonition,{type:"info",children:(0,d.jsxs)(n.p,{children:["If neither ",(0,d.jsx)(n.code,{children:"callback_data"})," nor ",(0,d.jsx)(n.code,{children:"startswith"})," are specified, all callbacks will be accepted."]})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var r=s(6540);const d={},i=r.createContext(d);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);