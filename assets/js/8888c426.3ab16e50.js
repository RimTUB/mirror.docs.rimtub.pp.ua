"use strict";(self.webpackChunkrim_tub_docs_release=self.webpackChunkrim_tub_docs_release||[]).push([[7510],{2101:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"mod_on_ready","title":"@mod.on_ready","description":"@mod.on_ready - This is a decorator that triggers when the bot starts. You can use it, for example, to launch workers.","source":"@site/versioned_docs/version-2.2.2-1/09_on_ready.md","sourceDirName":".","slug":"/mod/on_ready","permalink":"/docs/2.2.2-1/mod/on_ready","draft":false,"unlisted":false,"tags":[],"version":"2.2.2-1","sidebarPosition":9,"frontMatter":{"title":"@mod.on_ready","sidebar_position":9,"slug":"mod/on_ready","id":"mod_on_ready"},"sidebar":"tutorialSidebar","previous":{"title":"Other Handlers","permalink":"/docs/2.2.2-1/other_handlers"},"next":{"title":"Data Storages","permalink":"/docs/2.2.2-1/category/data-storages"}}');var o=t(4848),s=t(8453);const i={title:"@mod.on_ready",sidebar_position:9,slug:"mod/on_ready",id:"mod_on_ready"},a=void 0,d={},l=[{value:"Examples",id:"examples",level:2}];function m(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"@mod.on_ready"})," - This is a decorator that triggers when the bot starts. You can use it, for example, to launch ",(0,o.jsx)(n.a,{href:"/docs/glossary#worker--%D0%B2%D0%BE%D1%80%D0%BA%D0%B5%D1%80",children:"workers"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsxs)(n.p,{children:["Workers or any other long-running processes ",(0,o.jsx)(n.strong,{children:"must not"})," be launched directly in the ",(0,o.jsx)(n.code,{children:"on_ready"})," body. Use ",(0,o.jsx)(n.code,{children:"mod.add_task()"})," to start workers."]})}),"\n",(0,o.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",metastring:'title="SomeModule" showLineNumbers',children:'from utils import *\r\n\r\nasync def main(app: Client, mod: Module):\r\n    \r\n    # highlight-next-line\r\n    @mod.on_ready\r\n    async def _onr(app: Client):\r\n        mod.logger.info("RimTUB has started!")\r\n\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["The following example is taken from the ",(0,o.jsx)(n.strong,{children:"MineEvoMiner"})," module (version 2.5) by a third-party developer ",(0,o.jsx)(n.a,{href:"https://t.me/Kotcananacom",children:"@Kotcananacom"}),"."]})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["This example was written for RimTUB 2.1, so the HelpList in this example is ",(0,o.jsx)(n.strong,{children:"outdated!"})]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",metastring:'title="MineEvoMiner/__init__.py" showLineNumbers',children:"from utils import *\r\nfrom .miner import *\r\nfrom .stats.stat import *\r\nfrom .helplist import module_help # Note: RimTUB 2.2 uses a different HelpList system!\r\n\r\n\r\n\r\nasync def main(app: Client, mod: Module):\r\n\r\n    cmd = mod.cmd\r\n    module_help(mod) # Note: RimTUB 2.2 uses a different HelpList system!\r\n\r\n    # highlight-start\r\n    @mod.on_ready\r\n    async def _onr(app): await stats_ready(app, mod)\r\n    # highlight-end\r\n\r\n    ...\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",metastring:'title="MineEvoMiner/miner/mine.py, lines 25-32" showLineNumbers',children:"# When the client is running\r\nasync def stats_ready(app: Client, mod: Module):\r\n    AutoStopTimer(app, mod)\r\n    # highlight-next-line\r\n    mod.add_task(miner(app, mod))\r\n    if await mod.db.get('mine', False):\r\n        await mod.db.set('start_mine', time.time())\r\n    await mod.db.sql(\"CREATE TABLE IF NOT EXISTS mineevo_stats (type_case TEXT, type_bust TEXT, count INTEGER, timee TEXT)\")\r\n    await initialization_found(app, mod)\n"})})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(m,{...e})}):m(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(6540);const o={},s=r.createContext(o);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);